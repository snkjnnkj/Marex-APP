{"version":3,"file":"countDown.js","sources":["utils/countDown.js"],"sourcesContent":["import { ref } from 'vue'\n\nexport function useCountDown() {\n  // 每个实例独立的响应式状态\n  const countdown = ref('获取验证码')\n  const isCounting = ref(false)\n  let timer = null\n\n  const startCountdown = () => {\n    return new Promise((resolve) => {\n      isCounting.value = true\n      countdown.value = 60\n\n      timer = setInterval(() => {\n        if (countdown.value > 0) {\n          countdown.value--\n        } else {\n          clearInterval(timer)\n          countdown.value = '获取验证码'\n          isCounting.value = false\n          resolve()\n        }\n      }, 1000)\n    })\n  }\n\n  const handleClick = async (callback) => {\n    if (!isCounting.value) {\n      await startCountdown()\n      if (callback) {\n        await callback()\n      }\n    }\n  }\n\n  // 组件卸载时自动清理\n  const stop = () => {\n    if (timer) {\n      clearInterval(timer)\n      isCounting.value = false\n      countdown.value = '获取验证码'\n    }\n  }\n\n  return {\n    countdown,\n    handleClick,\n    stop,\n  }\n}\n"],"names":["ref"],"mappings":";;AAEO,SAAS,eAAe;AAE7B,QAAM,YAAYA,cAAG,IAAC,OAAO;AAC7B,QAAM,aAAaA,cAAG,IAAC,KAAK;AAC5B,MAAI,QAAQ;AAEZ,QAAM,iBAAiB,MAAM;AAC3B,WAAO,IAAI,QAAQ,CAAC,YAAY;AAC9B,iBAAW,QAAQ;AACnB,gBAAU,QAAQ;AAElB,cAAQ,YAAY,MAAM;AACxB,YAAI,UAAU,QAAQ,GAAG;AACvB,oBAAU;AAAA,QACpB,OAAe;AACL,wBAAc,KAAK;AACnB,oBAAU,QAAQ;AAClB,qBAAW,QAAQ;AACnB,kBAAS;AAAA,QACV;AAAA,MACF,GAAE,GAAI;AAAA,IACb,CAAK;AAAA,EACF;AAED,QAAM,cAAc,OAAO,aAAa;AACtC,QAAI,CAAC,WAAW,OAAO;AACrB,YAAM,eAAgB;AACtB,UAAI,UAAU;AACZ,cAAM,SAAU;AAAA,MACjB;AAAA,IACF;AAAA,EACF;AAGD,QAAM,OAAO,MAAM;AACjB,QAAI,OAAO;AACT,oBAAc,KAAK;AACnB,iBAAW,QAAQ;AACnB,gBAAU,QAAQ;AAAA,IACnB;AAAA,EACF;AAED,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,EACD;AACH;;"}